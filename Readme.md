# ymusic-cleanup

Скрипт для получения таблицы со всеми лайками на музыку. Если снимать галочки в таблице, лайки будут сняты и это позволяет управлять рекомендациями "волны", например.

Позволяет точнее настроить работу рекомендаций/vibe, убрать много лайков за раз

### Использование

 1. Получить токен из браузера https://github.com/MarshalX/yandex-music-api/discussions/513
 2. Сохранить в `token.txt`
 3. `poetry install`
 4. Use `poetry env path` as Jupyter Kernel
 5. Run all in the jupyter notebook -- создает файл `changes.xlsx`

    **Вместо Jupyter можно использовать `poetry run python main.py`**

 6. Открыть файл Google Sheets (Upload) или редактором Excel
 6. Можно поправить шапку таблицы + сделать первую колонку чекбоксами, для этого надо выбрать колонку A и **Insert > Checkbox**
 7. Снять ненужные лайки, сортируя треки по жанрам, году, названию, времени лайка и т.д.
 8. Получить обратно измененный XLSX, сохранить как `changes.xlsx`
 9. Перезапуск скрипта обновит лайки -- снимет или поставит обратно.

 ### Важно

Единственная сложность в том, что при добавлении новых лайков через приложение Яндекс.Музыки, нужно вручную скопировать новые лайки из обновленного файла, чтобы они попали в гугл таблицу (по timestamp), если редактируется через гугл таблицу.

Для удержания шапки при пролистывании таблицы в Google Sheets: выделить строку шапки и **View > Freeze**. Менять порядок столбцов менять нельзя.

Если новый лайк поставлен в приложении, но его нет в файле, он добавляется в файл. Если он там был снят вручную раньше, он будет снова поставлен.

Скрипт всегда пересоздает файл, пересортировывает. Сортировка: не по хронологии лайков. Вначале идет русская музыка (жанры) и не-латинские названия исполнителей.